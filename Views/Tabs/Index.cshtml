@model BudgetPortal.ViewModel.MultipleData
@using System.Web;

@using Microsoft.AspNetCore.Mvc

@using Microsoft.AspNetCore.Identity
@using BudgetPortal.Data

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "View";
    int OuterHeaderCount = 0;
    int OuterBodyCount = 0;
    int CountHeader = 0;
    int CounterBody = 0;
    int TableCount = 0;
    
}

<br />
@using (Html.BeginForm("Index", "Tabs", FormMethod.Post))
{
<div style = "float:right">
  <table border="0" cellpadding="5" cellspacing="0" >
    <tr>
       @if (User.IsInRole("Admin"))
       {
          <td>
              @Html.DropDownListFor(m => m.SelectedDivision, Model.DivisionNames,"--Please select any Division--", htmlAttributes : new { @class = "form-control" })
              @Html.ValidationMessageFor(Model => Model.DivisionNames, "", new { @class = "text-danger" })
          </td>
       }
          <td>
              @Html.DropDownListFor(m => m.SelectedAcademicYear, Model.AcademicYears,"--Please select any Financial Year--", htmlAttributes : new { @class = "form-control" })
              @Html.ValidationMessageFor(Model => Model.AcademicYears, "", new { @class = "text-danger" })
          </td>       
    </tr>
  </table>
</div>
<br />
<br />
<ul id="outerTab" class="nav nav-tabs" role="tablist">

    @foreach (var item in Model.Sectionss)
    {

        var inneridenti = String.Concat("Budget", @item.SectionNo.ToString());

        if (OuterHeaderCount == 0)
        {
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="@inneridenti-nav" data-bs-toggle="tab" data-bs-target="#@inneridenti" type="button" role="tab" aria-controls="@inneridenti" aria-selected="true">@item.SectionName</button>
            </li>
        }
        else
        {
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="@inneridenti-nav" data-bs-toggle="tab" data-bs-target="#@inneridenti" type="button" role="tab" aria-controls="@inneridenti" aria-selected="false">@item.SectionName</button>
            </li>
        }

        OuterHeaderCount++;
    }
</ul>

<div id="outerTabContent" class="tab-content">
    <br />
    @foreach (var inner in Model.Sectionss)
    {
        var inneridenti = String.Concat("Budget", @inner.SectionNo.ToString());
        CountHeader = 0;
        CounterBody = 0;
        TableCount = 0;

        if (OuterBodyCount == 0)
        {
            <div id="@inneridenti" class="tab-pane fade show active" role="tabpanel" aria-labelledby="@inneridenti-tab" aria-selected="true">

                <ul id="innertab1" class="nav nav-tabs" role="tablist">

                    @foreach (var item in Model.Groupss.Where(d => d.SectionNo == @inner.SectionNo))
                    {
                        var identi = String.Concat("Budget", Convert.ToInt32((Convert.ToDecimal(@item.GroupNo) * 10)).ToString());
                        if (CountHeader == 0)
                        {

                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="@identi-nav" data-bs-toggle="tab" data-bs-target="#@identi" type="button" role="tab" aria-controls="@identi" aria-selected="true">@item.GroupName</button>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="@identi-nav" data-bs-toggle="tab" data-bs-target="#@identi" type="button" role="tab" aria-controls="@identi" aria-selected="false">@item.GroupName</button>
                            </li>
                        }

                        CountHeader++;
                    }
                </ul>

                <div id="innertabcontent1" class="tab-content">
                    <br />
                    @foreach (var item in Model.Groupss.Where(d => d.SectionNo == @inner.SectionNo))
                    {
                        var Submit = String.Concat("Submit", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                           var identi = String.Concat("Budget", Convert.ToInt32((Convert.ToDecimal(@item.GroupNo) * 10)).ToString());
                           if (CounterBody == 0)
                        {
                            <div id="@identi" class="tab-pane fade show active" role="tabpanel" aria-labelledby="@identi-tab">

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>
                                                SubGroupNumber
                                            </th>
                                            <th>
                                                SubGroupName
                                            </th>
                                            <th>
                                                Budget Estimates 2022-23
                                            </th>
                                            <th>
                                                Actal 2021-2022
                                            </th>
                                            <th>
                                                Actual upto 30.09.2022
                                            </th>
                                            <th>
                                                Revised Estimates 2022-23
                                            </th>
                                            <th>
                                                % Variation in RE over the BE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for RE 2022-2023
                                            </th>
                                            <th>
                                                Budget Estimates 2023-24
                                            </th>
                                            <th>
                                                % Variation in BE 2023-2024 over the RE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for BE 2023-2024
                                            </th>
                                            <th>
                                                Comments / Justification
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                        @foreach (var Subs in Model.SubGroupss.Where(d => d.GroupNo.Equals(@item.GroupNo)))
                                        {
                                            var name1 = String.Concat("BudEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name2 = String.Concat("ActPrevFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name3 = String.Concat("ActCurrFinTill2ndQuart", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name4 = String.Concat("RevEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name5 = String.Concat("PerVarRevEstOverBudgEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name6 = String.Concat("ACAndBWPropRECurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name7 = String.Concat("BudgEstNexFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name8 = String.Concat("PerVarRevEstOverBudgEstNxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name9 = String.Concat("ACAndBWPropRENxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name10 = String.Concat("Justification", @inner.SectionNo.ToString(), @item.GroupNo,@TableCount);
                                            
                                            
                                            <tr>
                                                <td>
                                                    <img src="~/Images/plus.png" />
                                                    <div id="NestedTable" style="display:none">
                                                        <table class="table ChildGrid">
                                                            <tr>
                                                                <th>Ledger Number</th>
                                                                <th>Ledger Name</th>
                                                            </tr>
                                                            @foreach (var Ledgers in Model.Ledgerss.Where(d => d.SubGroupNo.Equals(@Subs.SubGroupNo)))
                                                            {
                                                                <tr>
                                                                    <td>@Ledgers.LedgerNo</td>
                                                                    <td>@Ledgers.LedgerName</td>
                                                                </tr>
                                                            }
                                                        </table>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Subs.SubGroupNo
                                                </td>
                                                <td>
                                                    @Subs.subGroupName
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name1" type="text" value="">-->
                                                         @*Html.TextBox(@name1, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.BudEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.BudEstCurrFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name2" type="text" value="">-->
                                                        @*@Html.TextBox(@name2, null, new { @class = "form-control" })*@
                                                        @Html.EditorFor(model => model.ActPrevFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.ActPrevFin, "",new {@class = "text-danger"})
                                                   </div>
                                                </td>
                                                <td>
                                                   <div class="form-group">
                                                        <!-- <input id="@name3" type="text" value="">-->
                                                        @* @Html.TextBox(@name3, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.ActCurrFinTill2ndQuart, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.ActCurrFinTill2ndQuart, "",new {@class = "text-danger"})
                                                   </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name4" type="text" value="">-->
                                                        @* Html.TextBox(@name4, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.RevEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.RevEstCurrFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name5" type="text" value="">-->
                                                        @*Html.TextBox(@name5, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.PerVarRevEstOverBudgEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstCurrFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                     <div class="form-group">
                                                        <!-- <input id="@name6" type="text" value="">-->
                                                        @* Html.TextBox(@name6, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.ACAndBWPropRECurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.ACAndBWPropRECurrFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name7" type="text" value="">-->
                                                        @*Html.TextBox(@name7, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.BudgEstNexFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.BudgEstNexFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name8" type="text" value="">-->
                                                            @* @Html.TextBox(@name8, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name9" type="text" value="">-->
                                                        @* Html.TextBox(@name9, null, new { @class = "form-control" }) *@
                                                        @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                        @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>
                                                <td>
                                                    <div class="form-group">
                                                        <!-- <input id="@name10" type="text" value="">-->
                                                        @* Html.TextBox(@name10, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.Justification, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.Justification, "",new {@class = "text-danger"})
                                                    </div>
                                                </td>

                                            </tr>

                                            TableCount++;
                                        }
                                        
                                    </tbody>
                                </table>
                                <input id="@Submit" type="submit" style="align-self:center">
                            </div>
                        }
                           else
                           {
                            <div id="@identi" class="tab-pane fade" role="tabpanel" aria-labelledby="@identi-tab">
                                <br />
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>
                                                SubGroupNumber
                                            </th>
                                            <th>
                                                SubGroupName
                                            </th>
                                            <th>
                                                Budget Estimates 2022-23
                                            </th>
                                            <th>
                                                Actal 2021-2022
                                            </th>
                                            <th>
                                                Actual upto 30.09.2022
                                            </th>
                                            <th>
                                                Revised Estimates 2022-23
                                            </th>
                                            <th>
                                                % Variation in RE over the BE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for RE 2022-2023
                                            </th>
                                            <th>
                                                Budget Estimates 2023-24
                                            </th>
                                            <th>
                                                % Variation in BE 2023-2024 over the RE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for BE 2023-2024
                                            </th>
                                            <th>
                                                Comments / Justification
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var Subs in Model.SubGroupss.Where(d => d.GroupNo.Equals(@item.GroupNo)))
                                        {
                                            var name1 = String.Concat("BudEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name2 = String.Concat("ActPrevFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name3 = String.Concat("ActCurrFinTill2ndQuart", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name4 = String.Concat("RevEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name5 = String.Concat("PerVarRevEstOverBudgEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name6 = String.Concat("ACAndBWPropRECurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name7 = String.Concat("BudgEstNexFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name8 = String.Concat("PerVarRevEstOverBudgEstNxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name9 = String.Concat("ACAndBWPropRENxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name10 = String.Concat("Justification", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);

                                            <tr>
                                                <td>
                                                    <img src="~/Images/plus.png" />
                                                    <div id="NestedTable" style="display:none">
                                                        <table class="table ChildGrid">
                                                            <tr>
                                                                <th>Ledger Number</th>
                                                                <th>Ledger Name</th>
                                                            </tr>
                                                            @foreach (var Ledgers in Model.Ledgerss.Where(d => d.SubGroupNo.Equals(@Subs.SubGroupNo)))
                                                            {
                                                                <tr>
                                                                    <td>@Ledgers.LedgerNo</td>
                                                                    <td>@Ledgers.LedgerName</td>
                                                                </tr>
                                                            }
                                                        </table>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Subs.SubGroupNo
                                                </td>
                                                <td>
                                                    @Subs.subGroupName
                                                </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name1" type="text" value="">-->
                                                            @*Html.TextBox(@name1, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name2" type="text" value="">-->
                                                            @*@Html.TextBox(@name2, null, new { @class = "form-control" })*@
                                                            @Html.EditorFor(model => model.ActPrevFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActPrevFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name3" type="text" value="">-->
                                                            @* @Html.TextBox(@name3, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ActCurrFinTill2ndQuart, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActCurrFinTill2ndQuart, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name4" type="text" value="">-->
                                                            @* Html.TextBox(@name4, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.RevEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.RevEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name5" type="text" value="">-->
                                                            @*Html.TextBox(@name5, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name6" type="text" value="">-->
                                                            @* Html.TextBox(@name6, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ACAndBWPropRECurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ACAndBWPropRECurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name7" type="text" value="">-->
                                                            @*Html.TextBox(@name7, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudgEstNexFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudgEstNexFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name8" type="text" value="">-->
                                                            @* @Html.TextBox(@name8, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name9" type="text" value="">-->
                                                            @* Html.TextBox(@name9, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name10" type="text" value="">-->
                                                            @* Html.TextBox(@name10, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.Justification, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.Justification, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                            </tr>
                                            TableCount++;
                                        }
                                    </tbody>
                                </table>
                            </div>
                        }
                           CounterBody++;
                    }
                </div>
            </div>
        }

        else
        {
            <div id="@inneridenti" class="tab-pane fade" role="tabpanel" aria-labelledby="@inneridenti-tab" aria-selected="false">

                <ul id="innertab2" class="nav nav-tabs" role="tablist">

                    @foreach (var item in Model.Groupss.Where(d => d.SectionNo == @inner.SectionNo))
                    {
                        
                        var identi = String.Concat("Budget", Convert.ToInt32((Convert.ToDecimal(@item.GroupNo) * 10)).ToString());
                        if (CountHeader == 0)
                        {

                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="@identi-nav" data-bs-toggle="tab" data-bs-target="#@identi" type="button" role="tab" aria-controls="@identi" aria-selected="true">@item.GroupName</button>
                            </li>
                        }
                        else
                        {
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="@identi-nav" data-bs-toggle="tab" data-bs-target="#@identi" type="button" role="tab" aria-controls="@identi" aria-selected="false">@item.GroupName</button>
                            </li>
                        }

                        CountHeader++;
                    }
                </ul>

                <div id="innertabcontent2" class="tab-content">
                    <br />
                    @foreach (var item in Model.Groupss.Where(d => d.SectionNo == @inner.SectionNo))
                    {
                          var Submit = String.Concat("Submit", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                          var identi = String.Concat("Budget", Convert.ToInt32((Convert.ToDecimal(@item.GroupNo) * 10)).ToString());
                          if (CounterBody == 0)
                         {
                            <div id="@identi" class="tab-pane fade show active" role="tabpanel" aria-labelledby="@identi-tab">

                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>
                                                SubGroupNumber
                                            </th>
                                            <th>
                                                SubGroupName
                                            </th>
                                            <th>
                                                Budget Estimates 2022-23
                                            </th>
                                            <th>
                                                Actal 2021-2022
                                            </th>
                                            <th>
                                                Actual upto 30.09.2022
                                            </th>
                                            <th>
                                                Revised Estimates 2022-23
                                            </th>
                                            <th>
                                                % Variation in RE over the BE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for RE 2022-2023
                                            </th>
                                            <th>
                                                Budget Estimates 2023-24
                                            </th>
                                            <th>
                                                % Variation in BE 2023-2024 over the RE 2022-2023
                                            </th>
                                            <th>
                                                AC & BW Proposal for BE 2023-2024
                                            </th>
                                            <th>
                                                Comments / Justification
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var Subs in Model.SubGroupss.Where(d => d.GroupNo.Equals(@item.GroupNo)))
                                        {
                                            var name1 = String.Concat("BudEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo,@TableCount);
                                            var name2 = String.Concat("ActPrevFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name3 = String.Concat("ActCurrFinTill2ndQuart", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name4 = String.Concat("RevEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name5 = String.Concat("PerVarRevEstOverBudgEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name6 = String.Concat("ACAndBWPropRECurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name7 = String.Concat("BudgEstNexFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name8 = String.Concat("PerVarRevEstOverBudgEstNxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name9 = String.Concat("ACAndBWPropRENxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name10 = String.Concat("Justification", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);

                                            <tr>
                                                <td>
                                                    <img src="~/Images/plus.png" />
                                                    <div id="NestedTable" style="display:none">
                                                        <table class="table ChildGrid">
                                                            <tr>
                                                                <th>Ledger Number</th>
                                                                <th>Ledger Name</th>
                                                            </tr>
                                                            @foreach (var Ledgers in Model.Ledgerss.Where(d => d.SubGroupNo.Equals(@Subs.SubGroupNo)))
                                                            {
                                                                <tr>
                                                                    <td>@Ledgers.LedgerNo</td>
                                                                    <td>@Ledgers.LedgerName</td>
                                                                </tr>
                                                            }
                                                        </table>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Subs.SubGroupNo
                                                </td>
                                                <td>
                                                    @Subs.subGroupName
                                                </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name1" type="text" value="">-->
                                                            @*Html.TextBox(@name1, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name2" type="text" value="">-->
                                                            @*@Html.TextBox(@name2, null, new { @class = "form-control" })*@
                                                            @Html.EditorFor(model => model.ActPrevFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActPrevFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name3" type="text" value="">-->
                                                            @* @Html.TextBox(@name3, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ActCurrFinTill2ndQuart, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActCurrFinTill2ndQuart, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name4" type="text" value="">-->
                                                            @* Html.TextBox(@name4, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.RevEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.RevEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name5" type="text" value="">-->
                                                            @*Html.TextBox(@name5, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name6" type="text" value="">-->
                                                            @* Html.TextBox(@name6, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ACAndBWPropRECurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ACAndBWPropRECurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name7" type="text" value="">-->
                                                            @*Html.TextBox(@name7, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudgEstNexFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudgEstNexFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name8" type="text" value="">-->
                                                            @* @Html.TextBox(@name8, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name9" type="text" value="">-->
                                                            @* Html.TextBox(@name9, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name10" type="text" value="">-->
                                                            @* Html.TextBox(@name10, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.Justification, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.Justification, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                            </tr>

                                            TableCount++;
                                        }
                                    </tbody>
                                </table>
                                <input id="@Submit" type="submit" style="align-self:center">
                            </div>
                        }
                          else
                        {

                            <div id="@identi" class="tab-pane fade" role="tabpanel" aria-labelledby="@identi-tab">
                                <br />
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>
                                                SubGroupNumber
                                            </th>
                                            <th>
                                                SubGroupName
                                            </th>
                                            <th>
                                                Budget Estimates 2022-23
                                            </th>
                                            <th>
                                                Actal 2021-2022
                                            </th>
                                            <th>
                                                Actual upto 30.09.2022
                                            </th>
                                            <th>
                                                Revised Estimates 2022-23
                                            </th>
                                            <th>
                                                % Variation in RE over the BE 2022-2023
                                            </th>
                                            @if (User.IsInRole("Admin"))
                                                {
                                                    <th>
                                                        AC & BW Proposal for RE 2022-2023
                                                    </th>
                                                }
                                                <th>
                                                Budget Estimates 2023-24
                                            </th>
                                            <th>
                                                % Variation in BE 2023-2024 over the RE 2022-2023
                                            </th>
                                            @if (User.IsInRole("Admin"))
                                            {
                                                    <th>
                                                        AC & BW Proposal for BE 2023-2024
                                                    </th>
                                             }
                                                <th>
                                                Comments / Justification
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var Subs in Model.SubGroupss.Where(d => d.GroupNo.Equals(@item.GroupNo)))
                                        {
                                            var name1 = String.Concat("BudEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name2 = String.Concat("ActPrevFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name3 = String.Concat("ActCurrFinTill2ndQuart", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name4 = String.Concat("RevEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name5 = String.Concat("PerVarRevEstOverBudgEstCurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name6 = String.Concat("ACAndBWPropRECurrFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name7 = String.Concat("BudgEstNexFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name8 = String.Concat("PerVarRevEstOverBudgEstNxtFin", @inner.SectionNo.ToString(), @item.GroupNo,@TableCount);
                                            var name9 = String.Concat("ACAndBWPropRENxtFin", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);
                                            var name10 = String.Concat("Justification", @inner.SectionNo.ToString(), @item.GroupNo, @TableCount);

                                            <tr>
                                                <td>
                                                    <img src="~/Images/plus.png" />
                                                    <div id="NestedTable" style="display:none">
                                                        <table class="table ChildGrid">
                                                            <tr>
                                                                <th>Ledger Number</th>
                                                                <th>Ledger Name</th>
                                                            </tr>
                                                            @foreach (var Ledgers in Model.Ledgerss.Where(d => d.SubGroupNo.Equals(@Subs.SubGroupNo)))
                                                            {
                                                                <tr>
                                                                    <td>@Ledgers.LedgerNo</td>
                                                                    <td>@Ledgers.LedgerName</td>
                                                                </tr>
                                                            }
                                                        </table>
                                                    </div>
                                                </td>
                                                <td>
                                                    @Subs.SubGroupNo
                                                </td>
                                                <td>
                                                    @Subs.subGroupName
                                                </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name1" type="text" value="">-->
                                                            @*Html.TextBox(@name1, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name2" type="text" value="">-->
                                                            @*@Html.TextBox(@name2, null, new { @class = "form-control" })*@
                                                            @Html.EditorFor(model => model.ActPrevFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActPrevFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name3" type="text" value="">-->
                                                            @* @Html.TextBox(@name3, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ActCurrFinTill2ndQuart, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ActCurrFinTill2ndQuart, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name4" type="text" value="">-->
                                                            @* Html.TextBox(@name4, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.RevEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.RevEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name5" type="text" value="">-->
                                                            @*Html.TextBox(@name5, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstCurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstCurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name6" type="text" value="">-->
                                                            @* Html.TextBox(@name6, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.ACAndBWPropRECurrFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.ACAndBWPropRECurrFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name7" type="text" value="">-->
                                                            @*Html.TextBox(@name7, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.BudgEstNexFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.BudgEstNexFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name8" type="text" value="">-->
                                                            @* @Html.TextBox(@name8, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name9" type="text" value="">-->
                                                            @* Html.TextBox(@name9, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.PerVarRevEstOverBudgEstNxtFin, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.PerVarRevEstOverBudgEstNxtFin, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                                    <td>
                                                        <div class="form-group">
                                                            <!-- <input id="@name10" type="text" value="">-->
                                                            @* Html.TextBox(@name10, null, new { @class = "form-control" }) *@
                                                            @Html.EditorFor(model => model.Justification, new {htmlAttributes = new { @class = "form-control" }})
                                                            @Html.ValidationMessageFor(model => model.Justification, "",new {@class = "text-danger"})
                                                        </div>
                                                    </td>
                                            </tr>
                                            TableCount++;
                                        }
                                    </tbody>
                                </table>
                                <input id="@Submit" type="submit" style="align-self:center">
                            </div>
                        }
                          CounterBody++;
                    }
                </div>
            </div>
        }

        OuterBodyCount++;
    }
</div>
}
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="~/js/nestedtable.js"></script>

